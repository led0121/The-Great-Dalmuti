# 위대한 달무티 & 원카드 (The Great Dalmuti & One Card) - 웹 게임

이 프로젝트는 보드게임 "위대한 달무티"와 카드게임 "원카드"를 웹 브라우저에서 즐길 수 있도록 구현한 멀티플레이어 게임입니다. Node.js와 React를 사용하여 개발되었으며, Socket.io를 통해 실시간 플레이를 지원합니다.

## 🎮 주요 기능

### 공통 기능
*   **멀티플레이어 지원**: 2명 이상 함께 플레이할 수 있습니다.
*   **방 시스템**: 방을 생성하고 코드를 공유하여 친구들과 비공개 게임을 즐길 수 있습니다.
*   **게임 모드 선택**: 방장이 대기실에서 **달무티** 또는 **원카드** 중 선택할 수 있습니다.
*   **실시간 채팅**: 게임 내에서 자유롭게 위치를 옮길 수 있는 채팅창을 제공합니다.
*   **다국어 지원**: 한국어와 영어를 지원합니다.

### 🃏 원카드 (One Card)
*   **기본 규칙**: 먼저 손패를 모두 없애는 사람이 승리합니다. 이전 카드와 같은 무늬 또는 같은 숫자로 매칭하여 카드를 냅니다.
*   **공격 카드 계층 시스템**:
    | 카드 | 기본 공격력 | 방어 가능 카드 |
    |------|-----------|---------------|
    | 2 | +2 (커스텀 가능) | 2, 3(방어 전용) |
    | A | +3 (커스텀 가능) | A만 |
    | 흑백 조커 | +5 (커스텀 가능) | 흑백 조커만 |
    | 컬러 조커 | +7 (커스텀 가능) | 컬러 조커만 |
*   **방어 규칙**: 같은 종류의 공격 카드로만 방어 가능합니다. **상위 카드로는 막을 수 없습니다.**
*   **3 카드 방어**: 3 카드는 **2 공격만** 차단(무효화)할 수 있는 특수 방어 카드입니다.
*   **특수 카드**:
    *   **J (스킵)**: 다음 플레이어를 건너뜁니다.
    *   **Q (리버스)**: 턴 방향을 반대로 바꿉니다. (3인 이상)
    *   **7 (체인지)**: 무늬를 변경합니다. 플레이어가 직접 원하는 무늬를 선택합니다.
*   **원카드 외치기**:
    *   카드가 **1장 남으면 5초 이내에 '원카드' 버튼**을 눌러야 합니다.
    *   못 누르면 **+2장 패널티**! 다른 플레이어가 먼저 누르면 잡혀서 패널티!
    *   잘못된 타이밍에 누르면 **본인이 +1장** 페널티를 받습니다.
    *   원카드를 외쳐야 하는 본인에게는 버튼이 **랜덤 위치**에 나타나 약간의 핸디캡이 있습니다.
*   **최대 카드 수 탈락**: 카드가 설정된 숫자(5~50) 이상이면 즉시 탈락합니다. (0 = 비활성화)
*   **게임방 설정**:
    *   공격 카드 개별 ON/OFF 및 **공격력(1~20) 커스텀** 설정
    *   같은 숫자 동시 내기 옵션
    *   카드 덱 수(1~3) 조절
    *   턴 제한 시간(5~30초) 설정

### 👑 위대한 달무티 (The Great Dalmuti)
*   **멀티플레이어 지원**: 3명에서 최대 8명까지 함께 플레이할 수 있습니다.
*   **자동화된 규칙**:
    *   **카드 내기**: 더 낮은 계급(더 좋은 숫자)의 카드를 내야 합니다.
    *   **수량 규칙**: 이전 사람이 낸 카드 수보다 **같거나 더 많은** 수의 카드를 낼 수 있습니다.
    *   **조커**: 조커(13)는 어떤 카드로든 사용할 수 있는 만능 카드입니다.
    *   **혁명**: 조커 2장을 가진 플레이어는 대혁명을 일으켜 순위를 뒤바꿀 수 있습니다.
*   **고급 게임 진행**:
    *   **세금 (Taxation)**: 라운드가 시작될 때 꼴등(농노)은 1등(달무티)에게 가장 좋은 카드 2장을 자동으로 바칩니다. 1등은 원하는 카드 2장을 돌려줍니다.
    *   **시장 (Market)**: 세금 징수가 끝나면 시장이 열립니다. 플레이어들은 카드를 시장에 내놓고 다른 플레이어와 무작위로 교환할 수 있습니다.
*   **편의 기능**:
    *   낼 수 없는 카드는 회색으로 표시됩니다.
    *   턴 제한 시간(기본 30초)이 지나면 자동으로 패스됩니다.
    *   **접속 끊김 대응**: 플레이어 이탈 시 자동으로 처리되어 게임이 멈추지 않습니다.

## 🚀 실행 방법

### 필수 요구 사항
*   Node.js (v18 이상 권장)
*   npm

### 설치 및 실행

1.  **프로젝트 클론 및 이동**
    ```bash
    git clone <repository-url>
    cd The-Great-Dalmuti
    ```

2.  **의존성 설치**
    *   서버와 클라이언트의 패키지를 모두 설치해야 합니다.
    ```bash
    # 서버 패키지 설치
    cd server
    npm install
    
    # 클라이언트 패키지 설치
    cd ../client
    npm install
    ```

3.  **한 번에 실행하기**
    *   프로젝트 루트에서 제공되는 스크립트를 사용하면 서버와 클라이언트를 동시에 실행할 수 있습니다.
    ```bash
    cd .. # 프로젝트 루트로 이동
    bash start.sh
    ```

4.  **접속**
    *   브라우저를 열고 터미널에 표시된 주소(예: `http://localhost:18000`)로 접속합니다.
    *   같은 네트워크에 있는 다른 기기에서도 접속할 수 있습니다 (방화벽 포트 3000, 18000 개방 필요).

## 🎲 게임 규칙 요약

### 원카드

1.  **목표**: 손에 든 모든 카드를 가장 먼저 없애는 사람이 승리합니다.
2.  **카드 내기**: 이전 카드와 같은 **무늬** 또는 같은 **숫자**의 카드를 낼 수 있습니다.
3.  **공격 카드**: 2, A, 흑백 조커, 컬러 조커는 공격 카드입니다. 공격 받으면 같은 종류의 카드로만 방어할 수 있습니다.
4.  **3 방어**: 3 카드는 2 공격을 무효화할 수 있습니다.
5.  **뽑기**: 낼 카드가 없으면 덱에서 1장을 뽑습니다. 공격을 못 막으면 누적된 장수만큼 뽑습니다.
6.  **원카드 외치기**: 카드가 1장 남으면 5초 내에 원카드 버튼을 눌러야 합니다!
    *   본인이 누르면 ✅ 안전
    *   다른 사람이 먼저 누르면 🚨 본인 +2장 패널티
    *   잘못된 타이밍에 누르면 ⚠️ 누른 사람 +1장 패널티
7.  **탈락**: 최대 카드 수를 초과하면 즉시 탈락합니다 (설정 시).

### 달무티

1.  **목표**: 손에 든 모든 카드를 가장 먼저 없애는 사람이 승리합니다.
2.  **계급**:
    *   **위대한 달무티 (1등)**: 다음 라운드에서 세금을 걷을 권리가 있습니다.
    *   **위대한 농노 (꼴등)**: 다음 라운드에서 세금을 바쳐야 합니다.
3.  **진행**:
    *   선 플레이어가 카드를 냅니다 (예: 계급 10 카드 2장).
    *   다음 플레이어는 **더 낮은 계급**(예: 9 이하)의 카드를 **같거나 더 많은 수량**(2장 이상)으로 내야 합니다.
    *   낼 카드가 없거나 전략상 내기 싫다면 **패스**할 수 있습니다.

## 🛠 기술 스택

*   **Frontend**: React, Vite, Tailwind CSS, Framer Motion (애니메이션)
*   **Backend**: Node.js, Express, Socket.io

## 📁 프로젝트 구조

```
The-Great-Dalmuti/
├── server/
│   ├── index.js          # Express + Socket.io 서버
│   ├── RoomManager.js    # 방 관리 (게임 타입별 분기)
│   ├── Game.js           # 달무티 게임 엔진
│   └── OneCardGame.js    # 원카드 게임 엔진 (공격카드, 원카드 외치기, 탈락 시스템)
├── client/
│   └── src/
│       ├── App.jsx           # 메인 앱 (게임 타입별 라우팅)
│       ├── LanguageContext.jsx
│       ├── translations.js   # 다국어 (한/영)
│       └── components/
│           ├── Login.jsx
│           ├── Lobby.jsx         # 대기실 (게임 타입 뱃지)
│           ├── GameRoom.jsx      # 달무티 게임 화면
│           ├── OneCardRoom.jsx   # 원카드 게임 화면 (원카드 버튼, 공격카드 설정)
│           ├── Card.jsx          # 달무티 카드 컴포넌트
│           ├── Chat.jsx
│           ├── PatchNotes.jsx
│           └── RulesModal.jsx
└── start.sh              # 서버+클라이언트 동시 실행
```
